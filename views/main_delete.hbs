<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Title -->
    <title>{{> title}}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8">
    <meta name="description" content="Responsive Admin Dashboard Template" />
    <meta name="keywords" content="admin,dashboard" />
    <meta name="author" content="Steelcoders" />

    <!-- Styles -->
    <link type="text/css" rel="stylesheet" href="./plugins/materialize/css/materialize.min.css" />
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="./plugins/metrojs/MetroJs.min.css" rel="stylesheet">
    <link href="./plugins/weather-icons-master/css/weather-icons.min.css" rel="stylesheet">
    <link href="./plugins/sweetalert/sweetalert.css" rel="stylesheet" type="text/css"/>  



   <link href="./plugins/datatables/css/jquery.dataTables.min.css" rel="stylesheet">
   <link href="./css/buttons.dataTables.min.css" rel="stylesheet">
   <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> 
    <!--    <link rel="stylesheet" type="text/css" href="https://www.daterangepicker.com/daterangepicker.css" /> --> 
  

    <!-- Theme Styles -->
    <link href="./css/alpha.min.css" rel="stylesheet" type="text/css" />
    <link href="./css/custom.css" rel="stylesheet" type="text/css" />
    <link href="./main.css" rel="stylesheet" type="text/css" />

    



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="http://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="http://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

</head>

<script>

 var datatable;

</script>

<body>

    {{> loader}}

    <div class="mn-content fixed-sidebar">

        {{> header}}
        {{> sidebar}}

        <main class="mn-inner"> 
            <div class="row">
                {{{body}}}
            </div>
        </main>
        


    </div>

    <script src="./plugins/jquery/jquery-2.2.0.min.js"></script>
    <script src="./plugins/materialize/js/materialize.min.js"></script>
    <script src="./plugins/material-preloader/js/materialPreloader.min.js"></script>
    <script src="./plugins/jquery-blockui/jquery.blockui.js"></script>
    <script src="./plugins/sweetalert/sweetalert.min.js"></script>
   


<!--  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script> 

<!--<script type="text/javascript" src="https://longbill.github.io/jquery-date-range-picker/src/jquery.daterangepicker.js"></script>-->



<!--<script type="text/javascript" src=" https://www.daterangepicker.com/daterangepicker.js"></script>-->

 <script src="./js/alpha.min.js"></script>
 
{{#if usedef}}
    <!-- Javascripts -->
    <script src="./plugins/sweetalert/sweetalert.min.js"></script>
    <script src="./js/pages/miscellaneous-sweetalert.js"></script>


    <script src="./plugins/waypoints/jquery.waypoints.min.js"></script>
    <script src="./plugins/counter-up-master/jquery.counterup.min.js"></script>
    <script src="./plugins/jquery-sparkline/jquery.sparkline.min.js"></script>
    <script src="./plugins/chart.js/chart.min.js"></script>
    <script src="./plugins/flot/jquery.flot.min.js"></script>
    <script src="./plugins/flot/jquery.flot.time.min.js"></script>
    <script src="./plugins/flot/jquery.flot.symbol.min.js"></script>
    <script src="./plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="./plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="./plugins/curvedlines/curvedLines.js"></script>
    <script src="./plugins/peity/jquery.peity.min.js"></script>
    <script src="./js/alpha.min.js"></script>
    <script src="./js/pages/dashboard.js"></script>
{{/if}}

 {{#if (checkView viewname 'viewmessages')}}

        <script src="./plugins/datatables/js/jquery.dataTables.min.js"></script>
        <script src="./plugins/datatables/js/dataTables.buttons.min.js"></script>
        <script src="./plugins/datatables/js/dataTables.fixedColumns.min.js"></script>
        

        <script src="./plugins/datatables/js/jszip.min.js"></script>
        <script src="./plugins/datatables/js/pdfmake.min.js"></script>
        <script src="./plugins/datatables/js/vfs_fonts.js"></script>
        <script src="./plugins/datatables/js/buttons.html5.min.js"></script>
        <script src="./plugins/datatables/js/buttons.print.min.js"></script>

       
        <script src="./js/pages/table-data.js"></script>

        

{{/if}}


</body>

</html>

{{#if (checkView viewname 'viewmessages')}}

<script type="text/javascript">

function showMailDialog(txtdata,myform)
{    
    $('#report_txtdoc').val(txtdata);
    $('#report_form').val(myform);
    $('#asendmailmodal').click();
    $('#asendmailmodal').trigger("click");
}

function sendMail(txtdoc)
{
    //alert('going to send')
    //alert($('#report_email').val())
    //alert($('#report_txtdoc').val())
    //alert($('#report_textarea').val())   
    //alert($('#report_form').val())

    $.post("sendmail",
    {
        emails: $('#report_email').val(),
        message: $('#report_textarea').val(),
        txtdoc: $('#report_txtdoc').val()

    }, function(data,status){

       

        if(data == "1")
        {
             swal("E-Mail", "Message Sent To: " + $('#report_email').val(), "success");
        }
        else
        {
             swal("E-Mail", "Message Not Sent", "error");
        }
    })

}

function showmsg(txtdata,obj)
{
    console.log(txtdata)
    console.log(obj)

   $.get( "getmessage?id=1&code=x&txtdata="+txtdata, function( data ) {
     $( "#swiftnotice" ).text( $.trim(data) );
   })

    $('#getpdf').attr('name',txtdata)
    $('#sendpdf').attr('name',txtdata)

    $('#msenderRef').text("REF: "+ obj.senderRef)
    $('#getpdf').click(function() { getpdf(txtdata,0); });
    $('#sendpdf').click(function() { showMailDialog(txtdata,0); });

    $('#SenderX').text(obj.Sender)
    $('#RecieverX').text(obj.Reciever)
    $('#ReferenceX').text(obj.senderRef)
    $('#DateX').text(obj.cdate)
    $('#TimeX').text(obj.ctime)
    $('#MtypeX').text(obj.mtype)
    $('#inoutX').text(obj.dir)

                /*
                <li class="collection-item" >Sender: <label class="green-text" id="SenderX"></label></li>
                <li class="collection-item" >Reciever: <label class="green-text" id="RecieverX"></label></li>
                <li class="collection-item" >Reference: <label class="green-text" id="ReferenceX"></label></li>
                <li class="collection-item" >Date: <label class="green-text" id="DateX"></label></li>
                <li class="collection-item" >Time: <label class="green-text" id="TimeX"></label></li>
                <li class="collection-item" >Message Type: <label class="green-text" id="MtypeX"></label></li>
                <li class="collection-item" >In/Out: <label class="green-text" id="inoutX"></label></li>
                */

    $('#showmsgdetails').click();
    $('#showmsgdetails').trigger("click");

}

//function showmessage(myform,txtdata,formkey,sendref)age
function showmessage(myform,txtdata,formkey,sendref)
{
   var rows = datatable.rows( formkey ).data();


   $.get( "getmessage?id=1&code=x&txtdata="+txtdata, function( data ) {
     $( "#swiftnotice" ).text( $.trim(data) );

   })

$('#getpdf').attr('name',txtdata)
$('#sendpdf').attr('name',txtdata)

//alert(sendref)

$('#msenderRef').text("REF: "+sendref)


$('#getpdf').click(function() { getpdf(this.name,0); });
$('#sendpdf').click(function() { showMailDialog(this.name,0); });



/*

                <li class="collection-item" >Sender: <label class="green-text">{{this.BenName}}</label></li>
                <li class="collection-item" >Reciever: <label class="green-text">{{this.OderingCustomerName}}</label></li>
                <li class="collection-item" >Reference: <label class="green-text">{{this.Amount}}</label></li>
                <li class="collection-item" >Date: <label class="green-text">{{this.Currency}}</label></li>
                <li class="collection-item" >Time: <label class="green-text">{{this.Valdate}}</label></li>
                <li class="collection-item" >Message Type: <label class="green-text">{{this.mtype}}</label></li>
                <li class="collection-item" >In/Out: <label class="green-text">{{this.NetStatus}}</label></li>

*/
    $('#'+myform+'').click();
    $('#'+myform+'').trigger("click");
}

function getpdf(myform,frmkey)
{
    $.get( "getpdf?doc="+myform, function( data ) {

        //alert(data.pdf)

        var link=document.createElement('a');
        link.href='/getpdf?pdf='+data.pdf;
        link.click();

        
        $('#frmclose'+frmkey).click();
        $('#frmclose'+frmkey).trigger("click");

        swal("Download", "Message Downloaded", "success");

    });
}

</script>

{{/if}}